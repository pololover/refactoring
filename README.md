# refactoring

vue 리펙토링

리펙토링 1. -> 데이터를 Vuex화 할 시 효과적인가?
데이터가 무수히 많거나 깊이가 차이는 컴포넌트들간의 데이터 이동은 Vuex를 사용하는 게 효과적이라고 볼 수 있다.
state : 데이터 저장공간
actions : dispatch를 통해서 실행.
mutations : actions내부에서 데이터 조작을 통해서 접근가능한 부분. 

리펙토링 2. -> 개발전에 설계를 하고 개발을 했는가?
컴포넌트 설계는 중복되는 코드의 값을 줄여줄 수 있어 리팩토링에 있어 가장 우선시 되는 것이다. 
이를 대비해 공통컴포넌트를 설계한 뒤 라우터의 name 또는 query를 통해서 분기별 처리를 할 수 있다.

컴포넌트를 분리할 때 computed를 통해서 공통컴포넌트 변수를 다룰 수 있다. 
또 이는 template v-if를 통해서 분기별처리를 할 수 있다. 재사용성이 증가되기에 적극적으로 이 방법을 토대로 리팩토링 하는게 좋은 것처럼 보인다.


리펙토링 3. ->  slot을 사용할만한 곳이 있었는가?
vue의 slot을 통해서 한껏 코드를 유연하게 짤 수 있다. 
slot은 상위에서 데이터를 주고 하위에서는 받는 것인데 이 과정을 하위컴포넌트에서 빈칸으로 뚫어놓음으로써 상위 컴포넌트가 무엇이든간에 slot name만 참조가 된다면 원하는 데이터를 삽입할 수 있다. 

리펙토링 4. -> 중복된 이벤트에 대해 eventBus를 사용할 생각을 해봤는가?
props와 emit을 이용해서 이벤트를 작동시킬 수 있지만 컴포넌트간의 관계가 멀리 떨어져있는 경우라면 eventBus를 이용하는 것이 좋다. 이는 bus라는 객체에 이벤트들을 담거나 제거시킴으로써 거리가 먼 컴포넌트 사이에서 이벤트를 적용할 때 효율적이다.

리펙토링 5. -> 하이오더 컴포넌트를 만듦으로써 중복된 내용이 많이 지워졌는가?
하이오더 컴포넌트 : 컴포넌트에서 반복되는 코드들을 공통으로 다루기 위해서 사용하는 것이다. 상위 컴포넌트에서 created나 render, name등과 같은 많은 부분을 재사용할 수 있기에 이를 이용하는 것이 가시성 및 접근성에 효과적이라고 볼 수 있다. 

리펙토링 6. -> mixin을 통해 중복된 내용이 많이 지워졌는가? 컴포넌트 깊이가 깊은가?
mixin : vue에서 제공하는 컴포넌트 재사용가능하게 하는 유연한 기법. 하이오더 컴포넌트는 깊이가 깊어지면 복잡해지는반면에 mixin은 해당 mixin파일을 컴포넌트에 추가하는 것이기 때문에 구조를 보다 쉽게 볼 수 있다.

리펙토링 7. -> 데이터를 불러올 때 원하는 시점에 불러와지는가?
데이터를 불러오는 건 보통 두가지 단계에서 진행한다.

created vs router navigation-guard
created는 컴포넌트가 생성될 떄 실행하는 것이고 router navigation-guard는 URL이 변경될 때 실행하는 것이다. 
둘 중 먼저 실행되는 것은 후자이다.

vuex 인스턴스와 router인스턴스는 vue에만 연결될 수 있기 때문에 vuex파일 및 routes파일에서 this키워드를 통해서 route, vuex를 접근할 수 없다. 때문에 이 파일들 안에서는 store객체나 router객체를 직접 불러와서 다루는 수밖에없다. 

router navigation guard에서 이벤트를 호출하고 이벤트를 종료하는 부분은 컴포넌트에서 정의해도 좋다. 왜냐하면 데이터를 비동기적으로 불러오는 단계는 시간이 오래 걸릴 수 있기 때문에 그 시간에 mounted가 됐을때 로딩이 끝날 수 있게 하는 것이다. 단 데이터가 정말 오래걸리는 경우에는 너무 빨리 로딩화면이 끝나기 때문에 이 상황에는 좋지 않음을 보인다. spinner와 loading과 같은 것들은 전역적으로 쓰기 때문에 컴포넌트마다 정의해주는 것보다는 mixin을 정의해서 mixin만 불러오는 식으로 사용해도 좋다.

리펙토링 8. -> 외부 라이브러리에 대해 모듈화를 했는가?
외부 라이브러리를 모듈화함으로써 App.vue와 같은 최상위 컴포넌트의 무게가 덜어지게 할 수 있다. 

리펙토링 9. -> 중복된 코드에 대해서 플러그인으로 만들어봤는가?
import를 통해 라이브러리를 불러오는 코드의 경우 컴포넌트마다 있다면 불편할 수 있다. 이를 플러그인 파일을 하나 생성해 이 부분에서만 중복된 코드의 import부분을 Vue.Prototype에 넣는다면 Vue가 생성될 때 이를 변수로 넣어주기 때문에 코드의 중복성을 줄일 수 있다. 



